<!DOCTYPE html>
<!--
Possibilities:

1) Already logged in.
    - Activate acct
    - Redirect to index_new.html
    - Display message saying account has been activated.

2) Not logged in.
    - Show username
    - Ask for password
    - Then sign them in and redirect to index_new.html

3) Signed in as a different user:
    - Ask for password
    - Display message about how activating the account will switch who is
    signed in.
-->
<html>

<head>
    <title>Canopy - An Open Source Platform for the Internet of Things</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="canopy-js-client/canopy.js"></script>
    <script src="canopy_app_util.js"></script>
    <script src="nodes/cano.js"></script>
    <script src="nodes/cano_topbar.js"></script>
    <script src="nodes/cano_account_page.js"></script>
    <script src="nodes/cano_account_sidebar.js"></script>
    <script src="nodes/cano_device_list.js"></script>
    <script src="nodes/cano_device_details.js"></script>
    <script src="nodes/cano_device_details_details.js"></script>
    <script src="nodes/cano_device_details_vars.js"></script>
    <script src="nodes/cano_devices_page.js"></script>
    <script src="nodes/cano_devices_sidebar.js"></script>
    <script src="nodes/cano_devices_create.js"></script>
    <script src="nodes/cano_account_dropdown.js"></script>
    <script src="nodes/cano_device_no_devices_msg.js"></script>
    <script src="nodes/cano_editable.js"></script>
    <script src="nodes/cano_main_page.js"></script>
    <script src="nodes/cano_option.js"></script>
    <script src="nodes/cano_switcher.js"></script>
    <script src="canoweb_dispatcher.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,700|ABeeZee|Titillium+Web:200,300,400,700' rel='stylesheet' type='text/css'>
    <link href='canoweb.css' rel='stylesheet' type='text/css'>
</head>

<body style='min-width: 800px; background:#ffffff'>

<div id=main></div>

</body>
<script>

var canopy = new CanopyClient({
    "cloud-host" : "dev02.canopy.link",
    "http-port" : 80
});

canopy.OnReady(function() {
    urlParams = CanopyUtil_GetURLParams();

    canopy.ActivateAccount({
        username: urlParams["username"],
        code: urlParams["code"],
        onSuccess: function() {
            window.location.replace("index_new.html?activated=true");
        },
        onError: function() {
            alert("Error activating account");
            //window.location.replace("login.html");
        }
    });
});
</script>

</html>



